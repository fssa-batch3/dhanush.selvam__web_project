<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">
    <title> Cow 1 details </title>

    <link rel="stylesheet" href="../../../assets/css/style.css">
    <link rel="stylesheet" href="../../../assets/css/cattle details/cattle_productpage.css">
    <link rel="stylesheet" href="../../../assets/css/header_footer.css">
    <script src="https://www.w3schools.com/lib/w3.js"></script>
    <script src="../../../assets/js/main.js"></script>
    <link rel="icon" href="../../../assets/images/cattles/logo.png" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=PT+Serif:ital,wght@0,400;0,700;1,700&display=swap"
        rel="stylesheet">
</head>

<body>

    <main>
        <div class="bspace"><button class="btn" onclick="window.history.back()"> BACK </button></a></div>
        <div class="slide_container">
            <div class="ibg">
                <!-- <img src="../../../assets/images/cattles/b1.jpg" class="image">
                <img src="../../../assets/images/cattles/b10.jpg" class="image"> -->
            </div>
            <button class="chevron" id="left" onclick="plusDivs(-1)"><i class="fa-solid fa-chevron-left"></i></button>
            <button class="chevron" id="right" onclick="plusDivs(1)"><i class="fa-solid fa-chevron-right"></i></button>
        </div>

        <div class="content">
            <div class="product">
                <div class="product_name">
                    <button class="check"> VERIFIED CATTLE </button>
                    <h1 class="name"> </h1>
                    <div class="years">
                        <p class="gf"> </p>
                        <p class="gf1"> </p>
                    </div>
                </div>
                <div class="product_details">
                    <h1 class="over"> Details </h1>
                    <hr>
                    <div class="overview">
                        <div class="gf2">
                            <p> Milk per day </p>
                            <p class="color"> </p>
                        </div>
                        <div class="gf2">
                            <p> Lactation </p>
                            <p class="color1"> </p>
                        </div>
                        <div class="gf2">
                            <p> Weight </p>
                            <p class="color2"> </p>
                        </div>
                    </div>
                </div>
                <div class="description">
                    <h1 class="over"> Description </h1>
                    <hr>
                    <p id="p3"> </p>
                </div>
            </div>

            <div class="seller">
                <div class="price">
                    <h1 class="cash"> </h1>
                    <div class="bspace2"> </div>
                </div>
                <div class="sellerdetails">
                    <h4> SOLD BY </h4>
                    <h2 class="sellername"> </h2>
                    <h4 class="posted_date"> </h4>
                    <div class="bspace2"><a
                            href="https://api.whatsapp.com/qr/XQYMHVSSYORIN1?autoload=1&app_absent=0"><button id="chat"
                                class="check"> Chat with Seller </button></a></div>
                    <div class="phone_icon">
                        <i class="fa-solid fa-phone"></i>
                        <p class="phone_no"></p>
                    </div>
                    <div class="address_icon">
                        <i class="fa-solid fa-location-dot"></i>
                        <p class="address"></p>
                    </div>
                </div>
                <div class="profile">
                    <div class="bspace3">
                        <!-- <button id="seller_profile" class="check"> View Seller Profile </button> -->
                    </div>
                </div>
            </div>
        </div>

        <div class="ho7">
            <div class="ho6">
                <h1> </h1>
            </div>
            <div class="cattles_container"></div>
        </div>
    </main>

    <footer>
        <div class="foot">
            <div class="foot1">
                <img class="logof" src="../../../assets/images/cattles/logo2.png" alt="logo">
                <p class=" f1p"> Kowmart.com is an online marketplace established with the aim to strengthen Livestock
                    Economy of the country. It helps livestock enterprises/self-employed/individuals to achieve their
                    full potential while ensuring livestock wellbeing.</p>
            </div>
            <div class="foot2">
                <h2 class="connect"> CONNECT WITH US</h2>
                <div class="fspace">
                    <p class="p2"> Email: info@kowmart.com</p>
                    <p class="p2"> Ph.no: 1234567890</p>
                    <p class="p2"> Insta: KowMart</p>
                </div>
                <div class="contact">
                    <i class="fa-brands fa-facebook"></i>
                    <i class="fa-brands fa-whatsapp"></i>
                    <i class="fa-brands fa-instagram"></i>
                </div>
            </div>
        </div>
    </footer>

    <script src="../../../assets/js/header.js"></script>

    <script>

        const urlParams = new URLSearchParams(window.location.search);
        const breed_category = urlParams.get('breed');
        const cattle_id = urlParams.get('cattle_id')
        const user_id = urlParams.get('user_id');

        let cattle_detail = JSON.parse(localStorage.getItem("cattle_details"));
        const cattle = cattle_detail.filter(e => e.cattle_uniqueId == cattle_id);

        let user_detail = JSON.parse(localStorage.getItem("userData"));
        const user = user_detail.find(e => e.phone_no == user_id);

        cattle_image = document.createElement("img");
        cattle_image.setAttribute("src", cattle[0]["image"]);
        cattle_image.setAttribute("alt", cattle[0]["breed"] + " " + cattle[0]["cattle"]);
        cattle_image.setAttribute("class", "image");
        document.querySelector("div.ibg").append(cattle_image);

        if (cattle[0]["image1"] != "") {
            cattle_image1 = document.createElement("img");
            cattle_image1.setAttribute("src", cattle[0]["image1"]);
            cattle_image1.setAttribute("alt", cattle[0]["breed"] + " " + cattle[0]["cattle"]);
            cattle_image1.setAttribute("class", "image");
            document.querySelector("div.ibg").append(cattle_image1);
        }

        cattle_name = document.querySelector("h1.name");
        cattle_name.innerText = cattle[0]["breed"] + " " + cattle[0]["cattle"];

        cattle_age = document.querySelector("p.gf");
        cattle_age.innerText = cattle[0]["age"] + " Years";

        cattle_gender = document.querySelector("p.gf1");
        cattle_gender.innerText = cattle[0]["gender"];

        milk = document.querySelector("p.color");
        milk.innerText = cattle[0]["milk"] + " litres";

        lactation = document.querySelector("p.color1");
        lactation.innerText = cattle[0]["lactation"];

        weight = document.querySelector("p.color2");
        weight.innerText = cattle[0]["weight"] + " Kg";

        if (cattle[0]["description"] != "") {
            description = document.querySelector("p#p3");
            description.innerText = cattle[0]["description"];
        }
        else {
            description = document.querySelector("p#p3");
            description.innerText = "Quality " + cattle[0]["breed"] + " " + cattle[0]["cattle"] + " of " + cattle[0]["age"] + " year(s) age is available. The price of the cattle is Rs. " + cattle[0]["price"] + " /-. The " + cattle[0]["cattle"] + " is in " + cattle[0]["lactation"] + " lactation. It Produces " + cattle[0]["milk"] + " Litres of milk on daily basis.";
        }


        price = document.querySelector("h1.cash");
        price.innerText = "Rs." + cattle[0]["price"];

        // â‚¹ seller details

        seller_name = document.querySelector("h2.sellername");
        seller_name.innerText = user["name"];

        favourite = document.createElement("button");
        favourite.setAttribute("class", "check");
        favourite.setAttribute("id", "favourite");
        favourite.setAttribute("onclick", getId())
        favourite.innerText = "Add to Favourite";
        favourite.setAttribute("custom-id", cattle_id);
        document.querySelector(".bspace2").append(favourite)

        function getId() {

            favourite.addEventListener("click", function (event) {
                let cattleId = event.currentTarget.getAttribute('custom-id');

                let favourites = JSON.parse(localStorage.getItem("favourites")) || [];

                let exist = favourites.some(e => e.cattleId == cattleId);

                let cattle_details = JSON.parse(localStorage.getItem("cattle_details"));
                const favourite_id = cattle_details.filter(e => e.cattle_uniqueId == cattleId);

                let user_unique_id = JSON.parse(localStorage.getItem("phone_no_id"));

                if (!exist) {
                    favourites.push({ cattleId, user_unique_id });
                    localStorage.setItem('favourites', JSON.stringify(favourites));
                    window.location.href = "../../cattle/favourites.html"
                }
                else {
                    alert("Already added in the list")
                }
            }
            )
        }

        uploaded_date = document.querySelector("h4.posted_date");
        uploaded_date.innerText = "Posted On: " + cattle_detail["date"];

        icon = document.createElement("i");

        phone_no = document.querySelector("p.phone_no");
        phone_no.innerText = user["phone_no"];

        address = document.querySelector("p.address");
        address.innerText = user["address"] + ", " + user["pincode"] + ".";

        seller_profile = document.createElement("button");
        seller_profile.setAttribute("class", "check");
        seller_profile.setAttribute("id", "seller_profile");
        seller_profile.innerText = "View Seller Profile";
        seller_profile.setAttribute("onclick", getId1())
        document.querySelector(".bspace3").append(seller_profile);

        // function getId1(){
        //     window.location.href = "../../cattle/b-sprofile.html";
        // }

        let category = JSON.parse(localStorage.getItem("cattle_details"));
        let category_id = category.filter(e => e.breed == breed_category);

        let index = category_id.find(e => e.cattle_uniqueId == cattle_id);
        let index_no = category_id.indexOf(index);

        let array = category_id.splice(0, index_no);

        let new_array = category_id.concat(array);

        if (breed_category == null) {
            document.getElementById("head").style.display = "none";
            document.getElementById("hr1").style.display = "none";
            // document.getElementsByClassName("ho7").style.display = "none";
        }

        // heading 

        line = document.createElement("hr");
        line.setAttribute("id", "hr1");
        document.querySelector("div.ho6").append(line);

        head = document.createElement("h1");
        head.innerText = "More " + breed_category;
        head.setAttribute("id", "head")

        document.querySelector("div.ho6").append(head);

        for (let i = 1; i <= 3; i++) {

            // cattle container
            div_p1 = document.createElement("div");
            div_p1.setAttribute("class", "p1");

            // image container
            div_img_container = document.createElement("div");
            div_img_container.setAttribute("class", "img_container");
            div_p1.append(div_img_container)

            // a 

            cattle_imageContainer = document.createElement("a")
            cattle_imageContainer.setAttribute("href", "./C1.html?breed=" + new_array[i]["breed"] + "&cattle_id=" + new_array[i]["cattle_uniqueId"] + "&user_id=" + new_array[i]["userId"]);
            div_img_container.append(cattle_imageContainer)

            // cattle image
            cat_image = document.createElement("img");
            cat_image.setAttribute("src", new_array[i]["image"]);
            cat_image.setAttribute("alt", new_array[i]["breed"] + " " + new_array[i]["cattle"]);
            cat_image.setAttribute("class", "i1");
            cattle_imageContainer.append(cat_image)

            // cattle info container
            div_bspace1 = document.createElement("div");
            div_bspace1.setAttribute("class", "bspace1");
            div_p1.append(div_bspace1)

            // cattle info
            p_name = document.createElement("p");
            p_name.setAttribute("class", "p2 pname");
            p_name.innerText = new_array[i]["breed"] + " " + new_array[i]["cattle"] + " " + new_array[i]["id"];
            div_bspace1.append(p_name)

            p_age = document.createElement("p");
            p_age.setAttribute("class", "p2");
            p_age.innerText = "Age: " + new_array[i]["age"] + " Year(s)";
            div_bspace1.append(p_age)

            p_gender = document.createElement("p");
            p_gender.setAttribute("class", "p2");
            p_gender.innerText = "Gender: " + new_array[i]["gender"];
            div_bspace1.append(p_gender)

            // a

            buttonContainer = document.createElement("a")
            buttonContainer.setAttribute("href", "../cattle details/cow/C1.html?breed=" + new_array[i]["breed"] + "&cattle_id=" + new_array[i]["cattle_uniqueId"] + "&user_id=" + new_array[i]["userId"]);
            div_bspace1.append(buttonContainer)

            button_know = document.createElement("button");
            button_know.innerText = "Know More";
            buttonContainer.append(button_know)

            document.querySelector("div.cattles_container").append(div_p1)
        }

        let slideIndex = 1;
        showSlides(slideIndex);

        function plusSlides(n) {
            showSlides(slideIndex += n);
        }

        function showSlides(n) {
            let i;
            let slides = document.getElementsByClassName("image");
            if (n > slides.length){ 
                slideIndex = 1 
            }
            if (n < 1){
                slideIndex = slides.length 
            }
            for (i = 0; i < slides.length; i++) {
                slides[i].style.display = "none";
            }
            slides[slideIndex - 1].style.display = "block";
        }

        // var slideIndex = 1;
        // showDivs(slideIndex);

        // function plusDivs(n) {
        //     showDivs(slideIndex += n);
        // }

        // function showDivs(n) {
        //     var i;
        //     var x = document.getElementsByClassName("image");
        //     if (n > x.length) { slideIndex = 1 }
        //     if (n < 1) { slideIndex = x.length }
        //     for (i = 0; i < x.length; i++) {
        //         x[i].style.display = "none";
        //     }
        //     x[slideIndex - 1].style.display = "block";
        // }

    </script>

</body>

</html>