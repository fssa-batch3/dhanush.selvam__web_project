<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">
        <title> Cattles List </title>

        <link rel="stylesheet" href="../../assets/css/style.css">
        <link rel="stylesheet" href="../../assets/css/cattles/cattlelist.css">
        <link rel="stylesheet" href="../../assets/css/header_footer.css">
        <script src = "../../assets/js/main.js"></script>
        <link rel="icon" href="../../assets/images/cattles/logo.png" type="image/x-icon">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=PT+Serif:ital,wght@0,400;0,700;1,700&display=swap" rel="stylesheet">
    </head>

    <body>

        <main>

            <!-- Cattles Section -->

            <div class = "products_section">
            
                <div class = "back_button_container">
                    <button class = "btn" onclick = "window.history.back()"> BACK </button>
                </div>

                <div class = "title_container">
                    <h1 class = "title_color"> Cattle List </h1> 
                </div>
                <div class = "cattles_container"> </div>

            </div>

        </main>

        <script src = "../../assets/js/header.js"></script>
        <script src = "../../assets/js/footer.js"></script>
    
        <script>const user_UniqueId = JSON.parse(localStorage.getItem("phone_no_id"));
        
        const cattle_details = JSON.parse(localStorage.getItem("cattle_details"));
        const usersCattle = cattle_details.filter((e) => e.userId == user_UniqueId);

        for (i = 0; i < usersCattle.length; i++) {
  // cattle container
          cattle_container = document.createElement("div");
          cattle_container.setAttribute("class", "cattle_container");
          cattle_container.setAttribute("id", "edit_cattle_container");

          // image container
          cattle_img_container = document.createElement("div");
          cattle_img_container.setAttribute("class", "img_container");
          cattle_container.append(cattle_img_container);

          // a

          cattle_anchor = document.createElement("a");
          cattle_anchor.setAttribute(
    "href",
    `../cattle details/cow/C1.html?cattle_id=${usersCattle[i].cattle_uniqueId}&user_id=${usersCattle[i].userId}`
          );
  cattle_img_container.append(cattle_anchor);
        
          // cattle image
          cattle_image = document.createElement("img");
          cattle_image.setAttribute("src", usersCattle[i].image);
          cattle_image.setAttribute(
    "alt",
    `${usersCattle[i].breed} ${usersCattle[i].cattle}`
          );
  cattle_image.setAttribute("class", "cattle_image");
          cattle_anchor.append(cattle_image);

          // cattle info
          cattle_name = document.createElement("h2");
          cattle_name.innerText = `${usersCattle[i].breed} ${usersCattle[i].cattle} ${usersCattle[i].id}`;
          cattle_container.append(cattle_name);

          button_know = document.createElement("button");
          button_know.setAttribute("class", "edit_button");
          button_know.setAttribute("data-id", usersCattle[i].cattle_uniqueId);
          button_know.innerText = "Edit";
          cattle_container.append(button_know);

          document.querySelector("div.cattles_container").append(cattle_container);
        }

        // Function for edit button

        const edit = document.querySelectorAll("button.edit_button");
        edit.forEach(function (findId) {
          findId.addEventListener("click", function () {
            const { id } = this.dataset;
        
            localStorage.setItem("cattle_unique_Id", JSON.stringify(id));
            window.location.href = "./cattle_profile.html";
          });
        });
    </script>

    </body>

</html>