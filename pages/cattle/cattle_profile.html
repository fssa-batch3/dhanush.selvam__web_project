<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">
    <title> Edit Cattle Details </title>

    <link rel="stylesheet" href="../../assets/css/style.css">
    <link rel="stylesheet" href="../../assets/css/cattles/selldetails3.css">
    <link rel="stylesheet" href="../../assets/css/header_footer.css">
    <script src = "../../assets/js/main.js"></script>
    <link rel="icon" href="../../assets/images/cattles/logo.png" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=PT+Serif:ital,wght@0,400;0,700;1,700&display=swap" rel="stylesheet">
</head>

<body>
    
    <main>
        <div class = "d0">  
            <div><button onclick="window.history.back()"> BACK </button></a></div>
            <h1 class = "h14"> Cattle Details </h1>
        </div>
        <hr>
        <form>  
            <div class = "r1">
                <div>
                    <label> Age </label><br>
                    <input required type = "text" id = "age" oninput = "this.value = this.value.replace(/[^0-9]/g,'')" maxlength = "2">
                </div>
                <div>
                    <label> Gender </label><br>
                    <select required id = "gender">
					    <option> Male </option>
					    <option selected> Female </option>
				    </select>
                </div>
                <div class = "weight">
                    <label> Weight (kg) </label><br>
                    <input required type = "text" id = "weight" oninput = "this.value = this.value.replace(/[^0-9]/g,'')" maxlength = "5">
                </div>
            </div>
            <div class = "r1">
                <div>
                    <label> Milk per day (litres) </label><br>
                    <input required type = "text" id = "milk" oninput = "this.value = this.value.replace(/[^0-9]/g,'')" maxlength = "2">
                </div>
                <div>
                    <label> Price (Rs.) </label><br>
                    <input required type = "text" id = "price" oninput = "this.value = this.value.replace(/[^0-9]/g,'')">
                </div>
                <div class = "weight">
                    <label> Lactation </label><br>
                    <input required type = "text" id = "lactation" oninput = "this.value = this.value.replace(/[^0-9]/g,'')" maxlength = "2">
                </div>
            </div>
            <div class = "r2">
                <label> Description </label><br>
                <textarea id = "description"></textarea>
            </div>
            <div class = "r1">
                <div>
				    <label> Add or Remove Photo: </label><br>
				    <input type = "url" multiple id = "image">
                </div> 
                <div>
				    <label> Add or Remove Photo: </label><br>
				    <input type = "url" multiple id = "image1">
                </div>  
                <div class = "weight">
				    <label> Add or Remove Video: </label><br>
				    <input type = "url" multiple>
                </div>  
			</div>
            <div class = "sub">
                <div class = "divbtn"><button class = "btn2" type = "button" id = "sold"> Sold </button></div>
                <div><button class = "btn1" type = "button" id = "save"> Save </button></div>
            </div>
        </form>
    </main>

    <footer>
        <div class="foot">
            <div class="foot1">
                <img class="logof" src="../../assets/images/cattles/logo2.png" alt = "logo">
                <p class=" f1p"> Kowmart.com is an online marketplace established with the aim to strengthen Livestock
                    Economy of the country. It helps livestock enterprises/self-employed/individuals to achieve their
                    full potential while ensuring livestock wellbeing.</p>
            </div>
            <div class="foot2">
                <h2 class = "connect"> CONNECT WITH US</h2>
                <div class = "fspace">
                    <p> Email: info@kowmart.com</p>
                    <p> Ph.no: 1234567890</p>
                    <p> Insta: KowMart</p>
                </div>
                <div class = "contact">
                    <i class="fa-brands fa-facebook"></i>
                    <i class="fa-brands fa-whatsapp"></i>
                    <i class="fa-brands fa-instagram"></i>
                </div>
            </div>
        </div>
    </footer>

    <script src="../../assets/js/header.js"></script>

    <script>

        // Edit page

        let uid = JSON.parse(localStorage.getItem("cattle_unique_Id"));
        let cattle = JSON.parse(localStorage.getItem("cattle_details"));
        
        function find_data(e){
            return e.cattle_uniqueId == uid;
        }

        cattle_data = cattle.find(find_data);    

        document.getElementById("age").value = cattle_data["age"];
        document.getElementById("gender").value = cattle_data["gender"];
        document.getElementById("weight").value = cattle_data["weight"];
        document.getElementById("milk").value = cattle_data["milk"];
        document.getElementById("price").value = cattle_data["price"];
        document.getElementById("lactation").value = cattle_data["lactation"];
        document.getElementById("description").value = cattle_data["description"];
        document.getElementById("image").value = cattle_data["image"];
        document.getElementById("image1").value = cattle_data["image1"];

        // Update function

        function updateDetails() {

            if (confirm("Are you sure you want to save the details")) {
                cattle_data["age"] = document.getElementById("age").value;
                cattle_data["gender"] = document.getElementById("gender").value;
                cattle_data["weight"] = document.getElementById("weight").value;
                cattle_data["milk"] = document.getElementById("milk").value;
                cattle_data["price"] = document.getElementById("price").value;
                cattle_data["lactation"] = document.getElementById("lactation").value;
                cattle_data["description"] = document.getElementById("description").value;
                cattle_data["image"] = document.getElementById("image").value;
                cattle_data["image1"] = document.getElementById("image1").value;

                localStorage.setItem("cattle_details",JSON.stringify(cattle));
                window.location.href = "./seller_cattlelist.html";
            }

        }

        document.getElementById("save").addEventListener("click",updateDetails);

        // Delete function

        function deleteDetails(){
            if(confirm("Are you sure you want to remove this cattle?"))
            {
                let uid = JSON.parse(localStorage.getItem("cattle_unique_Id"));
                let cattle = JSON.parse(localStorage.getItem("cattle_details"));

                function find_data(e){
                    return e.cattle_uniqueId == uid;
                }

                cattle_data = cattle.find(find_data);
                const removedata = cattle.indexOf(cattle_data);

                cattle.splice(removedata,1);
                localStorage.setItem("cattle_details",JSON.stringify(cattle));
                window.location.href = "./seller_cattlelist.html";
            }
        }

        document.getElementById("sold").addEventListener("click",deleteDetails);

    </script>
    
</body>
</html>