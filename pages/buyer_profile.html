<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">
    <title> Buyer Profile </title>

    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/buyer_profile.css">
    <link rel="stylesheet" href="../assets/css/header_footer.css">
    <script src = "../assets/js/main.js"></script>
    <link rel="icon" href="../assets/images/cattles/logo1.png" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=PT+Serif:ital,wght@0,400;0,700;1,700&display=swap" rel="stylesheet">
</head>

<body>
    <header>
        <div class="navbar">
            <div class="logodiv"><a href = "../index.html"><img class = "logo" src="../assets/images/cattles/logo1.png" alt="logo"></a></div>
            <div class="lotit"><a href = "../index.html"><h1 class = "hd"> KowMart </h1></a></div>
        </div>
        <div id="mySidenav" class="sidenav">
            <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
            <ul class = "navbar">
                <li><a href="cattle/cattle_index.html">Cattles</a></li>
                <!-- <li><a href="agro pro/agro.html">Agro Products</a></li> -->
                <li><a href="about.html">About Us</a></li>
                <li class = "logbutton"><a href="./cattle/sell_details1.html"><button class = "sell"> SELL </button></a></li>
                <li class = "profile_icon"><a href = "#"><i class="fa-solid fa-user"></i></a></li>
            </ul>
        </div> 
        <span style="font-size:30px;cursor:pointer" onclick="openNav()">&#9776;</span> 
        <div class = "link_container">
            <ul class="navbar">
                <li><a href="cattle/cattle_index.html">Cattles</a></li>
                <!-- <li><a href="agro pro/agro.html">Agro Products</a></li> -->
                <li><a href="about.html">About Us</a></li>
            </ul>
        </div>
        <div class = "navbar butcot" id = "sellpro">
            <div class = "butspace"><a href = "./cattle/sell_details1.html"> <button class = "sell"> SELL </button> </a></div>
            <div class = "user"><a href = "#"><i class="fa-solid fa-user"></i></a></div>
        </div>
    </header>

        <main>
            <div class = "dmain divs">
                <form role = "form" onsubmit="updateDetails(event);">
                    <div class = "s1 divs">
                        <div class = "hello">
                            <img class = "prologo" src = "../assets/images/profile_logo.png" alt = "profile_logo">
                            <!-- <p class = "name"> Hi, XXX </p> -->
                        </div>
                        <div class = "myorder">
                            <div class = "ic1"> <i class="fa-solid fa-paw" id = "ic"></i> </div>
                            <!-- <div class = "ic1"> <a href = "cattle/seller_cattlelist.html"><i class="fa-solid fa-list" id = "ic"></i></a> </div> -->
                            <h2><a href = "cattle/seller_cattlelist.html"> Cattle List </a></h2>
                        </div>
                        <div class = "myorder">
                            <div class = "ic1"> <a href = "cattle/favourites.html"><i class="fa-solid fa-star" id = "ic"></i></a> </div>
                            <h2><a href = "cattle/favourites.html"> Favourites </a></h2>
                        </div>
                        <!-- <div class = "myorder">
                            <div class = "ic1"> <i class="fa-solid fa-bag-shopping" id = "ic"></i> </div>
                            <h2 class = "head1"><a href = "agro pro/order.html"> My orders </a></h2>
                        </div>
                        <div class = "myorder">
                            <div class = "ic1"> <i class="fa-solid fa-cart-shopping" id = "ic"></i> </div>
                            <h2 class = "head1"><a href = "agro pro/cart.html"> Cart </a></h2>
                        </div> -->
                        <div class = "myorder">
                            <div class = "ic1"> <a href = "../index.html"><i class="fa-solid fa-right-from-bracket" id = "ic"></i></a> </div>
                            <h2><a href = "../index.html"> Log out </a></h2>
                        </div>
                        <div class = "myorder">
                            <div class = "ic2"> <i class="fa-solid fa-trash" id = "ic"></i> </div>
                            <h2 class = "head1" id="delete">Delete Account</h2>
                        </div>
                    </div>
                    <div class = "s2 divs">
                        <div class = "details divs">
                            <h1 class = "head"> Profile </h1>
                            <div class = "divs">
                                <label> Name </label>
                                <input required type = "text" id = "name" readonly>
                            </div>
                            <div class = "divs">
                                <label> Phone.No </label>
                                <input required type = "tel" maxlength = "10" id = "phone_no" disabled>
                            </div>
                            <!-- <div class = "divs">
                                <label> Email </label><br>
                                <input placeholder = "abc@gmail.com" readonly required = "Email" id = "email">
                            </div> -->
                            <div class = "divs" >
                                <label> Address line 1</label>
                                <input required type = "text" id = "address_line1" readonly> 
                            </div>
                            <div class = "divs">
                                <label> Address line 2</label>
                                <input required type = "text" id = "address_line2" readonly>
                            </div>
                            <div class = "divs">
                                <label> Pincode </label>
                                <input required type = "text" id = "pincode" oninput = "this.value = this.value.replace(/[^0-9]/g,'')" minlength = "6" maxlength= "6" readonly>
                            </div>
                            <div class = "sub divs">
                                <div class = "divs"><button class = "btn1" id = "editButton"> Edit </button></div>
                                <div class = "divs"><button type = "submit" id = "save"> Save </button></div>
                            </div>
                        </div>
                    </div> 

                </form> 
            </div>

        </main>    

        <footer>
            <div class="foot">  
                <div class="foot1">
                    <img class="logof" src="../assets/images/cattles/logo2.png" alt = "logo">
                    <p class=" f1p"> Kowmart.com is an online marketplace established with the aim to strengthen Livestock
                        Economy of the country. It helps livestock enterprises/self-employed/individuals to achieve their
                        full potential while ensuring livestock wellbeing.</p>
                </div>
                <div class="foot2">
                    <h2 class = "connect"> CONNECT WITH US</h2>
                    <div class = "fspace">
                        <p> Email: info@kowmart.com</p>
                        <p> Ph.no: 1234567890</p>
                        <p> Insta: KowMart</p>
                    </div>
                    <div class = "contact">
                        <i class="fa-brands fa-facebook"></i>
                        <i class="fa-brands fa-whatsapp"></i>
                        <i class="fa-brands fa-instagram"></i>
                    </div>
                </div>
            </div>
        </footer>

        <script>
            let phone_id = JSON.parse(localStorage.getItem('phone_no_id'));
            let userData = JSON.parse(localStorage.getItem('userData'));

            function login_data(e){
                return e.phone_no == phone_id;
            }
            
            person_data = userData.find(login_data);
            document.getElementById("name").value = person_data['name'];
            document.getElementById("phone_no").value = person_data["phone_no"];
            document.getElementById("address_line1").value = person_data["address_line1"];
            document.getElementById("address_line2").value = person_data["address_line2"];
            document.getElementById("pincode").value = person_data['pincode'];

            document.getElementById("editButton").addEventListener("click",enableInput);

            function enableInput(e) {
                if(confirm("Are you sure you want to edit the details")){
                    document.getElementById("name").removeAttribute("readonly");
                    document.getElementById("address_line1").removeAttribute("readonly");
                    document.getElementById("address_line2").removeAttribute("readonly");
                    document.getElementById("pincode").removeAttribute("readonly");
                }
            }

            function updateDetails(e) {
                person_data["name"] = document.getElementById("name").value;
                person_data["address_line1"] = document.getElementById("address_line1").value;
                person_data["address_line2"] = document.getElementById("address_line2").value;
                person_data["pincode"] = document.getElementById("pincode").value;

                localStorage.setItem("userData",JSON.stringify(userData));
            }

            document.getElementById("save").addEventListener("click",disableInput);
            
            function disableInput(e) {
                if(confirm("Are you sure you want to save the details")){

                    document.getElementById("name").setAttribute("readonly","true");
                    document.getElementById("address_line1").setAttribute("readonly","true");
                    document.getElementById("address_line2").setAttribute("readonly","true");
                    document.getElementById("pincode").setAttribute("readonly","true");

                    window.location.href = "#";
                }
            }

            function deleteaccount(e){
                if(confirm("Are you sure you want to delete the account?"))
                {
                    let phone_id = JSON.parse(localStorage.getItem("phone_no_id"));
                    let userData = JSON.parse(localStorage.getItem("userData"));

                    function login_data(e){
                        return e.phone_no == phone_id;
                    }

            person_data = userData.find(login_data);
            const removedata = userData.indexOf(person_data);

            userData.splice(removedata,1);
            localStorage.setItem("userData",JSON.stringify(userData));
            window.location.href = "../index.html";
                }
            }

            const del = document.querySelector("#delete");
            del.addEventListener("click",deleteaccount)
            
        </script>

</body>
</html>